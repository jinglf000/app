var app_index=angular.module("index",["ngMessages"]);app_index.config(function(e){e.when("/",{templateUrl:"views/index.html",controller:"homeController"}).when("/login",{templateUrl:"views/login.html",controller:"loginController"}).when("/register",{templateUrl:"views/register.html",controller:"registerController"}).otherwise({redirectTo:"/"})}),app_index.controller("appIndex",function(e,r,n){}),app_index.controller("homeController",function(e,r){}),app_index.controller("loginController",function(e,r){}),app_index.controller("registerController",function(e,r){});var login=angular.module("login",["ngMessages"]);login.controller("appLogin",["$scope","$http","$window",function(e,r,n){e.loginSubmit=function(){var t={user:e.user,pass:e.pass,autoLogin:e.autoLogin},o={method:"POST",url:"/in",data:t};r(o).then(function(e){console.log(e,"success"),"1"==e.data.code&&(n.location.href="/")},function(e){console.log(e)})}}]),login.directive("checkUser",["$http","$q",function(e,r){var n=/^((1\d{10})|([-\w]?\w+([-+.]\w+)*[-\w]?@[-\w]?\w+([-.]\w+)*[-\w]?\.[-\w]?\w+([-.]\w+)*[-\w]?))$/;return{restrict:"A",require:"ngModel",link:function(e,r,t,o){o.$validators.username=function(e,r){var t=e||r;return!!n.test(t)}}}}]);var register=angular.module("reg",["ngMessages"]);register.controller("regControl",["$scope","$http","$window",function(e,r,n){e.registerForm=function(){r({url:"/app/register",method:"POST",data:{user:e.reg.user,pass:e.reg.pass,name:e.reg.name,age:e.reg.age,phone:e.reg.phone||""}}).then(function(e){e.data.code&&(n.alert("恭喜你注册成功！"),n.location.href="/")},function(e){console.log(e)})}}]),register.directive("checkUser",["$http","$q",function(e,r){var n=/^((1\d{10})|([-\w]?\w+([-+.]\w+)*[-\w]?@[-\w]?\w+([-.]\w+)*[-\w]?\.[-\w]?\w+([-.]\w+)*[-\w]?))$/;return{restrict:"A",require:"?ngModel",link:function(t,o,i,l){l.$validators.checkUser=function(e,r){var t=e||r;return!!n.test(t)},l.$asyncValidators.checkUserAsync=function(n,t){var o=n||t;return e.get("/app/userCheck?user="+o).then(function(e){if(console.log(e.data.code),e.data.code)return r.reject()})}}}}]),register.directive("oneToFifty",function(e){return{require:"?ngModel",link:function(r,n,t,o){o&&(o.$validators.oneToFifty=function(e){if(!e)return e;var r=parseInt(e);return r>=0&&r<=50},o.$formatters.unshift(function(r){return e("number")(r)}))}}}),register.directive("checkPhone",function(){return{restrict:"A",require:"?ngModel",link:function(e,r,n,t){var o=/^1\d{10}$/;t.$validators.checkPhone=function(e,r){var n=e||r;return!(!o.test(n)&&n)}}}});var x="myName",q=123;